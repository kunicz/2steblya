function redirectHome(){var t={"2steblya":["page28196964"],staytrueflowers:[]};$.each(t[site],function(t,r){document.location.href.indexOf(r)>-1&&(document.location.href="/")})}function buyToday(){var t=new URLSearchParams(window.location.search);t.has("buytoday")&&Cookies.set("buytoday",t.get("buytoday"))}function formValidationTexts(t,r=[]){t.length&&t.find(".t-submit").on("click",function(){var e={"2steblya":"укажи по брацки",staytrueflowers:"данное поле должно быть заполнено"},a=setInterval(function(){var o=t.find('[data-tilda-req="1"]').parents(".t-input-block").find(".t-input-error");o.length&&(o.each(function(t,a){var n=r[t]?r[t]:e[site];o.eq(t).text(n)}),clearInterval(a))},1)})}function headerMenu(){function t(){"2steblya"==site&&o.find(".t-sociallinks .t-sociallinks__item:last a").contents().wrapAll("<div>").parent().unwrap()}function r(){window.location.pathname&&"/"!=window.location.pathname&&o.find("a").each(function(){var t=$(this).attr("href");if("#"==Array.from(t)[0]){if("#opensearch"==t)return;$(this).attr("href","/"+t)}})}function e(){o.find('.t-menu__link-item[href*="#"]').on("click",function(){$(".tmenu-mobile").trigger("click")})}var a={"2steblya":"rec469639590",staytrueflowers:"rec496423452,#rec496387058"},o=$("#"+a[site]);o.length&&(t(),r(),e())}function spoilers(){$(".t668__title").removeClass("t-name").addClass("t-descr")}function externalLinks(){$("a").each(function(){$(this).is('[href^="htt"]:not([href*="'+window.location.hostname+'"])')&&$(this).attr("target","_blank")})}function footer(){function t(){var t={"2steblya":null,staytrueflowers:2021};if(t[site]){var r=$('.uc-footerCopyright [field="text"]'),e=(new Date).getFullYear();r.text(r.text().replace(t[site],t[site]+"-"+e))}}t()}function getFromDB(t,r){$.ajax({url:"https://php.2steblya.ru/ajax.php?script="+t,crossDomain:!0,type:"GET",success:function(t){var e=t.slice(0,1);r("{"==e||"["==e?JSON.parse(t):t)}})}function arrayOfValuesFromDB(t,r){if(!Array.isArray(t))return t;var e=[];return $.each(t,function(t,a){var o=a[r];["card_type"].includes(r)||(o=parseInt(o)),e.push(o)}),e}function getTovarsFromDB(){var t={id:["hidden","dopnik","paid_delivery","multiple_prices","allowed_today"],idValue:["hours_to_produce","date_to_open","days_to_close"],card_type:["no","text","image"]};$.each(t.id,function(t,r){getFromDB("TildaTovarsFromDB&tovars="+r+"&site="+site,function(t){tovarsFromDB[r]=arrayOfValuesFromDB(t,"id")})}),getFromDB("TildaTovarsFromDB&tovars=vitrina_id&site="+site,function(t){if(tovarsFromDB.vitrina=[],!Array.isArray(t))return t;$.each(t,function(t,r){if(r.vitrina_id.includes(",")){var e=r.vitrina_id.split(",");tovarsFromDB.vitrina.push(...e.map(t=>parseInt(t)))}else tovarsFromDB.vitrina.push(parseInt(r.vitrina_id))})}),$.each(t.card_type,function(t,r){getFromDB("TildaTovarsFromDB&tovars=card_type&card_type="+r+"&site="+site,function(t){tovarsFromDB["card_type_"+r]=arrayOfValuesFromDB(t,"id")})}),$.each(t.idValue,function(t,r){getFromDB("TildaTovarsFromDB&tovars="+r+"&site="+site,function(t){if(!Array.isArray(t))return t;tovarsFromDB[r]={},$.each(t,function(t,e){var a=e[r];"date_to_open"!=r&&(a=parseInt(a)),tovarsFromDB[r][e.id]=a})})}),setTimeout(function(){console.log(tovarsFromDB)},2e3)}function isTovarsFromDBLoaded(){var t=8;return!(Object.keys(tovarsFromDB).length<t)}function isTovarsFromDBEmpty(t){return void 0===tovarsFromDB[t]||(!(!Array.isArray(tovarsFromDB[t])||tovarsFromDB[t].length)||"object"==typeof tovarsFromDB[t]&&!Object.keys(tovarsFromDB[t]).length)}function getRussianDaysWord(t){if("number"!=typeof t||isNaN(t))return"дней";t=Math.abs(t);var r=t%10;return 0===r||r>=5&&r<=9||t>=11&&t<=19?"дней":1===r?"день":r>=2&&r<=4?"дня":"Error"}$(document).ready(function(){redirectHome(),headerMenu(),buyToday(),externalLinks(),product(),cart(),spoilers(),footer()}),getTovarsFromDB();