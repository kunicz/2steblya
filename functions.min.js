function redirectHome(){var t={"2steblya":["page28196964"],staytrueflowers:[]};$.each(t[site],function(t,e){document.location.href.indexOf(e)>-1&&(document.location.href="/")})}function buyToday(){var t=new URLSearchParams(window.location.search);t.has("buytoday")&&Cookies.set("buytoday",t.get("buytoday"))}function formValidationTexts(t,e=[]){t.length&&t.find(".t-submit").on("click",function(){var r={"2steblya":"укажи по брацки",staytrueflowers:"данное поле должно быть заполнено"},a=setInterval(function(){var o=t.find('[data-tilda-req="1"]').parents(".t-input-block").find(".t-input-error");o.length&&(o.each(function(t,a){var n=e[t]?e[t]:r[site];o.eq(t).text(n)}),clearInterval(a))},1)})}function headerMenu(){function t(){"2steblya"==site&&o.find(".t-sociallinks .t-sociallinks__item:last a").contents().wrapAll("<div>").parent().unwrap()}function e(){window.location.pathname&&"/"!=window.location.pathname&&o.find("a").each(function(){var t=$(this).attr("href");if("#"==Array.from(t)[0]){if("#opensearch"==t)return;$(this).attr("href","/"+t)}})}function r(){o.find('.t-menu__link-item[href*="#"]').on("click",function(){$(".tmenu-mobile").trigger("click")})}var a={"2steblya":"rec469639590",staytrueflowers:"rec496423452,#rec496387058"},o=$("#"+a[site]);o.length&&(t(),e(),r())}function spoilers(){$(".t668__title").removeClass("t-name").addClass("t-descr")}function externalLinks(){$("a").each(function(){$(this).is('[href^="htt"]:not([href*="'+window.location.hostname+'"])')&&$(this).attr("target","_blank")})}function footer(){function t(){var t={"2steblya":null,staytrueflowers:2021};if(t[site]){var e=$('.uc-footerCopyright [field="text"]'),r=(new Date).getFullYear();e.text(e.text().replace(t[site],t[site]+"-"+r))}}t()}function getFromDB(t,e){$.ajax({url:"https://php.2steblya.ru/ajax.php?script="+t,crossDomain:!0,type:"GET",success:function(t){var r=t.slice(0,1);e("{"==r||"["==r?JSON.parse(t):t)}})}function arrayOfValuesFromDB(t,e){if(!Array.isArray(t))return t;var r=[];return $.each(t,function(t,a){var o=a[e];["card_type"].includes(e)||(o=parseInt(o)),r.push(o)}),r}function getTovarsFromDB(){var t={id:["hidden","vitrina","dopnik","paid_delivery","multiple_prices","allowed_today"],idValue:["hours_to_produce","date_to_open","days_to_close"],card_type:["no","text","image"]};$.each(t.id,function(t,e){getFromDB("TildaTovarsFromDB&tovars="+e+"&site="+site,function(t){tovarsFromDB[e]=arrayOfValuesFromDB(t,"id")})}),$.each(t.card_type,function(t,e){getFromDB("TildaTovarsFromDB&tovars=card_type&card_type="+e+"&site="+site,function(t){tovarsFromDB["card_type_"+e]=arrayOfValuesFromDB(t,"id")})}),$.each(t.idValue,function(t,e){getFromDB("TildaTovarsFromDB&tovars="+e+"&site="+site,function(t){if(!Array.isArray(t))return t;tovarsFromDB[e]={},$.each(t,function(t,r){var a=r[e];"date_to_open"!=e&&(a=parseInt(a)),tovarsFromDB[e][r.id]=a})})}),setTimeout(function(){console.log(tovarsFromDB)},2e3)}function isTovarsFromDBLoaded(){var t=8;return!(Object.keys(tovarsFromDB).length<t)}function isTovarsFromDBEmpty(t){return void 0===tovarsFromDB[t]||(!(!Array.isArray(tovarsFromDB[t])||tovarsFromDB[t].length)||"object"==typeof tovarsFromDB[t]&&!Object.keys(tovarsFromDB[t]).length)}function getRussianDaysWord(t){if("number"!=typeof t||isNaN(t))return"дней";t=Math.abs(t);var e=t%10;return 0===e||e>=5&&e<=9||t>=11&&t<=19?"дней":1===e?"день":e>=2&&e<=4?"дня":"Error"}$(document).ready(function(){redirectHome(),headerMenu(),buyToday(),externalLinks(),product(),cart(),spoilers(),footer()}),getTovarsFromDB();