function cart(){var t=setInterval(function(){if(tovarsFromDBReady&&$(".t706__cartwin-content").length){if(!cartEnabled[site])return $(".t706").remove(),void clearInterval(t);setTimeout(function(){cartFunctions()},1e3),clearInterval(t)}},50)}function cartFunctions(){cartIconUponHeader(),cartOpen(),cartClose(),cartInputContainersClasses(),cartPromocode(),cartDelivery(),cartDeliveryZazhopinsk(),cartZakazchikNoTelegramNick(),cartZakazchikPoluchatel(),cartFormValidationTexts(),cartAdresPoluchatelya(),cartHerZnaetPoluchatelya(),cartCountItems(),cartDopsReminder(),cartPreventCloseOnOverlayClick(),cartErrorsMessageOnClick(),cartImportantFields(),cartRequiredFields(),cartYaCounterId(),cartSetCookies(),cartUseCookies(),cartHideOtkudaUznal(),cartHtmlEntities(),cartLovixlube(),cartO4ki(),cartSuccess()}function cartDynamicFunctions(){cartProductOptionsInOneLine(),cartOtsluniavit(),cartOnlyOneTovar(),cartPayedDeliveryForOnlyDops(),cartDonat(),cartPromocodeTovars(),cartShow()}function cartOpen(){$("body").on("click",".t706__carticon-wrapper,.t-store__prod-popup__btn",function(){setTimeout(function(){cartDynamicFunctions()},250)})}function cartClose(){$("body").on("click",".t706__close",function(){cartHide()})}function cartShow(){$(".t706__cartwin-content").fadeIn()}function cartHide(){$(".t706__cartwin-content").hide()}function cartInputContainersClasses(){$(".t706 .t-input-group").find("input,textarea,select").each(function(){var t=$(this).attr("name");t&&$(this).parents(".t-input-group").attr("id",t.replace("tildaspec-mask-",""))})}function cartCountItems(){var t;setInterval(function(){var e=$(".t706__product");t!=e.length&&(cartDynamicFunctions(),t=e.length)},500)}function cartDopsReminder(){var t={"2steblya":'хош добавить <a href="/catalog?tfc_quantity[643365612]=y&tfc_storepartuid[643365612]=%D0%9F%D0%9E%D0%94%D0%90%D0%A0+%D0%9E%D0%A7%D0%9A%D0%98&tfc_div=:::">подар очек</a> к букету? а што насчёт <a href="https://2steblya.ru/catalog?tfc_quantity[643365612]=y&tfc_storepartuid[643365612]=%D0%92%D0%90%D0%97%D0%AB&tfc_div=:::">вазы</a>?',"2steblya_white":"",gvozdisco:"",dorogobogato:"",staytrueflowers:""};"2steblya"==site&&$(".t706__cartwin-products").after('<div class="t706__cartwin-dopsReminder">'+t[site]+"</div>")}function cartDelivery(){function t(){function t(){moment.tz.setDefault("Europe/Moscow"),n.today=moment().toDate(),n["today-0"]=new Date,n["today-0"].setHours(0,0,0,0),n["tomorrow-0"]=new Date,n["tomorrow-0"].setDate(n["today-0"].getDate()+1),n["tomorrow-0"].setHours(0,0,0,0)}t(),setInterval(function(){t()},6e4)}function e(){setInterval(function(){if(o.val()&&"____-__-__"!=o.val()&&o.val()!=n["selected-yyyy"]+"-"+(n["selected-m"]<10?"0":"")+n["selected-m"]+"-"+(n["selected-d"]<10?"0":"")+n["selected-d"]){var t=o.val().split("-");n["selected-0"]=new Date(+t[0],t[1]-1,+t[2]),n["selected-d"]=parseInt(t[2].replace(/^0/,"")),n["selected-m"]=parseInt(t[1].replace(/^0/,"")),n["selected-yyyy"]=parseInt(t[0])}},50)}function a(){function t(){p.find(".t_datepicker__selected-day").removeClass("t_datepicker__selected-day"),o.val()&&p.find('[data-picker="'+n["selected-yyyy"]+"-"+n["selected-m"]+"-"+n["selected-d"]+'"]').addClass("t_datepicker__selected-day")}function e(){$(".t_datepicker__disclaimer").remove();var t=$(".t_datepicker__body");$('<div class="t_datepicker__disclaimer" style="width:'+t.width()+'px"></div>').insertAfter(t)}function a(){if(Object.keys(tovarsFromDB.date_to_open).length){var t=$(".t706__product");if(t.length){var e=n["tomorrow-0"];if($.each(t,function(){var t=$(this);$.each(tovarsFromDB.date_to_open,function(a,r){if(getTovarInCartId(t)==a&&(r=new Date(r),r.setDate(r.getDate()-1),e<r)){datesDiff=Math.floor((r-n["today-0"])/864e5),e=r;var i={"2steblya":"штоб смастерить "+getTovarInCartTitle(t)+", нам надо как минимум "+datesDiff+" "+getRussianDaysWord(datesDiff),"2steblya_white":"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+datesDiff+" "+getRussianDaysWord(datesDiff),gvozdisco:"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+datesDiff+" "+getRussianDaysWord(datesDiff),dorogobogato:"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+datesDiff+" "+getRussianDaysWord(datesDiff),staytrueflowers:"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+datesDiff+" "+getRussianDaysWord(datesDiff)};$(".t_datepicker__disclaimer").text(i[site])}})}),!(e<=n["tomorrow-0"])){for(var a=[],r=n["tomorrow-0"];r<=e;){var o=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();a.push(o),r.setDate(r.getDate()+1)}i(a)}}}}function r(){if(Object.keys(tovarsFromDB.days_to_close).length){var t=$(".t706__product");if(t.length){var e=0;if($.each(t,function(){var t=$(this);$.each(tovarsFromDB.days_to_close,function(a,r){if(getTovarInCartId(t)==a&&e<r){e=r;var i={"2steblya":"штоб смастерить "+getTovarInCartTitle(t)+", нам надо как минимум "+e+" "+getRussianDaysWord(e),"2steblya_white":"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+e+" "+getRussianDaysWord(e),gvozdisco:"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+e+" "+getRussianDaysWord(e),dorogobogato:"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+e+" "+getRussianDaysWord(e),staytrueflowers:"чтобы подготовить "+getTovarInCartTitle(t)+", нам надо как минимум "+e+" "+getRussianDaysWord(e)};$(".t_datepicker__disclaimer").html(i[site])}})}),e){for(var a=[],r=0;r<=e;r++){var o=n.today;o.setDate(n.today.getDate()+r),a.push(o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate())}i(a)}}}}function i(t){t.length&&$.each(t,function(t,e){$('.t_datepicker__day-cell[data-picker="'+e+'"]').addClass("t_datepicker__day-cell--disabled")})}function c(){if(notWorkingDatesList.length){var t={"2steblya":'если очень-очень надо в праздники, <a target="blank" href="https://t.me/dva_steblya">пешите</a>, обкашляем',"2steblya_white":'если очень-очень надо в праздники, <a target="blank" href="https://t.me/flowerswithbenefits">пешите</a>, договоримся',gvozdisco:"в праздничные даты не работаем",dorogobogato:"в праздничные даты не работаем",staytrueflowers:"в праздничные даты не работаем"};$.each(notWorkingDatesList,function(t,e){$('.t_datepicker__day-cell[data-picker="'+e+'"]').addClass("t_datepicker__day-cell--disabled").addClass("t_datepicker__day-cell--notWorking").text("❌")}),$(".t_datepicker__disclaimer").html(t[site])}}function s(){$(".t_datepicker__day-cell").each(function(){var t=$(this),e=t.attr("data-picker").match(/\d{4}\-(\d{1,})\-(\d{1,})/),a=t.is(".t_datepicker__next-month")||t.is(".t_datepicker__previous-month")||t.is(".t_datepicker__day-cell--disabled");$.each(specialDatesList,function(t,r){r.d==e[2]&&r.m==e[1]&&l(r,a)})})}function l(t,e){function a(e){var a=getTovarInCartId(e);return t[site].exclude.includes(a)?a:getTovarInCartPrice(e)>=t[site].minPrice?a:!(!tovarsFromDB.vitrina.includes(a)&&!tovarsFromDB[777].includes(a))&&a}function r(t){return tovarsFromDB[888].includes(t)}var i=!1,n=[],o=$(".t706__product");if(o.length&&(o.each(function(){var t=a($(this));t&&(i=!0),n.push(t)}),o.length>1&&o.each(function(){var t=getTovarInCartId($(this));if(!n.includes(t)&&!r(t))return i=!1,!1}),!i&&t[site].minPrice)){var c=t[site].minPrice.toString().replace(/0{3}$/,"к"),s="";s+=t[site].exclude.length?"только товары из праздничной коллекции и ":"",s+="товары от "+c,s=$('<div class="t_datepicker__specialDate" title="'+s+'">от<br>'+c+"</div>"),e&&s.css("opacity",.4),p.find('[data-picker$="-'+t.m+"-"+t.d+'"]').hide().after(s)}}function d(){function t(){var t=Cookies.get("buytoday");if(!t)return!1;var e=new Date,a=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),n=CryptoJS.MD5(a+"-"+r+"-"+i).toString();return t==n}var e=!1,a=$(".t706__product");a.length&&(a.each(function(){if(e=!![...tovarsFromDB.allowed_today,...tovarsFromDB.vitrina].includes(getTovarInCartId($(this))),!e)return!1}),a.each(function(){["корзилла"].includes($(this).find(".t706__product-title__option:first > div:first").text().trim())&&(e=!1)}),t()&&(e=!0),e&&(n.today.getHours()>=20||$(".t_datepicker__today").removeClass("t_datepicker__day-cell--disabled")))}function u(){if(tovarsFromDB.vitrina.length){var t=!1,e=$(".t706__product");if(e.length&&(e.each(function(){if(t=!!tovarsFromDB.vitrina.includes(getTovarInCartId($(this))),!t)return!1}),t)){var a={"2steblya":"с ветрины только щас или завтро","2steblya_white":"с витрины только на сегодня или на завтра",gvozdisco:"с витрины только на сегодня или на завтра",dorogobogato:"с витрины только на сегодня или на завтра",staytrueflowers:"с витрины только на сегодня или на завтра"};$(".t_datepicker__day-cell").addClass("t_datepicker__day-cell--disabled"),$(".t_datepicker__today").add($(".t_datepicker__today").next()).removeClass("t_datepicker__day-cell--disabled").attr("title",a[site])}}}var p,f=!1;setInterval(function(){if(p=$(".t_datepicker__inner"),p.length)return p.is(":hidden")?(o.attr("disabled",!1),void(f=!1)):void(f||(t(),e(),a(),r(),c(),s(),d(),u(),o.attr("disabled",!0),f=!0))},100),$("body").on("click",".t_datepicker__day-cell:not(.t_datepicker__past)",function(){setTimeout(function(){o.change()},100)}),$("body").on("click",".t_datepicker__arrow",function(){f=!1}),$("body").on("change",".t_datepicker__header select",function(){f=!1}),$("body").on("click",".t706__close-button,.t706__product-del",function(){o.val("")})}function r(){function t(){function t(){e.each((t,e)=>{const a=$(e),r=a.children("input").val();if(r.startsWith("к точному времени"))return void a.attr("id","precise");if(r.startsWith("как можно скорее"))return void a.attr("id","asap");const i=r.match(/^с (\d{2}):(\d{2}) до (\d{2}):(\d{2})/);if(i){const t=i[1],e=i[3];a.attr("id",`interval${t}-${e}`)}})}const e=n[d?"special":"common"];return t(),e}function e(){function e(t){t.is("#asap")&&t.css("display",f?"table":"none")}function i(){!f&&$("#asap input").is(":checked")&&$("#interval16-20 input").trigger("click")}function n(t){if(!f)return;const e=1.5,r=1.5,i=v(t);if(!i)return;const[n,o]=i;l<10&&n<12&&a(t,!1),l>=o-e-r&&a(t,!1),l>22&&t.is("#asap")&&a(t,!1)}function o(t){if(!h)return;const e=v(t);if(!e)return;if(l<=19)return;const[r]=e;r<12&&a(t,!1)}function v(t){const e=t.attr("id");if(!e)return null;const a=e.match(/^interval(\d+)-(\d+)$/);return a?[parseInt(a[1],10),parseInt(a[2],10)]:null}u&&(d=specialDatesList.find(t=>t.d===u.getDate()&&t.m===u.getMonth()+1),f=u.toDateString()===c.toDateString(),h=u.toDateString()===s.toDateString(),p=t(),p.each((t,r)=>{const i=$(r);a(i,!0),e(i),n(i),o(i)}),i(),r.find(".t-radio__wrapper-delivery").html("").append(p))}function a(t,e){const a=t.children("input");if(a.prop("disabled",!e),t.css("opacity",e?1:.3),!e&&a.is(":checked")){const e=t.closest("label").next().find("input");e.length&&e.trigger("click")}}const r=$("#dostavka-interval"),i=$("#dostavka_interval_specialDates"),n={common:r.find("label"),special:i.find("label")},c=new Date,s=new Date;s.setDate(c.getDate()+1),s.setHours(0,0,0,0);const l=c.getHours();let d,u,p,f,h;r.hide(),i.hide(),o.on("change",function(){const t=$(this).val();if(t){const t=o.val().split("-");u=new Date(+t[0],t[1]-1,+t[2]),e(),r.show()}else u=null,r.hide()}),r.find("input").on("change",function(){e()})}function i(){var t={"2steblya":["телегу","https://t.me/dva_steblya"],"2steblya_white":["телеграм","https://t.me/flowerswithbenefits"],gvozdisco:["телеграм","https://t.me/dva_steblya"],dorogobogato:["телеграм","https://t.me/dva_steblya"],staytrueflowers:["телеграм","https://t.me/staytrueflowers"]},e=$("#dostavka-date .t-input-subtitle"),a=e.text().replace(t[site][0],'<a href="'+t[site][1]+'">'+t[site][0]+"</a>");e.html(a)}var n={},o=$('.t706 [name="dostavka-date"]');o.prop("readonly",!0),t(),e(),a(),r(),i()}function cartDeliveryZazhopinsk(){$("#adres-zazhopinsk").wrap('<div id="adres-zazhopinsk__cont"></div>'),$("#adres-zazhopinsk input").on("change",function(){deliveryPriceInterval(!$(this).is(":checked"))})}function cartOtsluniavit(){"2steblya"==site&&$(".t706__cartwin-prodamount-label").text("нужно отслюнявить ")}function cartDonat(){function t(){$("#comment-florist > label").text("восторги и благодарности"),$('[name="comment-florist"]').attr("placeholder","мы готовы впитывать")}function e(){if(!$('[name="dostavka-date"]').val()){var t=new Date,e={d:t.getDate()+1,m:t.getMonth()+1,y:t.getFullYear()};e.d<10&&(e.d="0"+e.d),e.m<10&&(e.m="0"+e.m),$('[name="dostavka-date"]').val(e.y+"-"+e.m+"-"+e.d)}}if("2steblya"==site){$(".t706__cartwin-content").removeClass("donat");var a=$(".t706__product");if(a.length&&!(a.length>1)){var r={"2steblya":857613433221,"2steblya_white":"",gvozdisco:"",dorogobogato:"",staytrueflowers:""};getTovarInCartId(a.eq(0))==r[site]&&($(".t706__cartwin-content").addClass("donat"),cartIncompleteRemoveRequired(),t(),e())}}}function cartZakazchikNoTelegramNick(){var t=$('[name="messenger-zakazchika"]'),e=$('<div id="messenger-zakazchika-no-telegram">нет никнейма</div>');e.insertBefore(t),e.on("click",e.selector,function(){t.val($('[name="name-zakazchika"]').val()||"нет никнейма")})}function cartZakazchikPoluchatel(){var t=$('.t706 [name="name-poluchatelya"]'),e=$('.t706 [name="phone-poluchatelya"]');$("#name-poluchatelya,#phone-poluchatelya,#phone-poluchatelya + div").wrapAll("<div />").wrapAll('<div id="poluchatelData" />');var a,r=$('.t706 [name="name-zakazchika"]'),i=$('.t706 [name="phone-zakazchika"]'),n=['<div class="t-input-group t-input-group_cb unimportant">','<label class="t-checkbox__control t-text t-text_xs">','<input type="checkbox" class="t-checkbox js-tilda-rule">','<div class="t-checkbox__indicator"></div>',"получать буду я","</label>","</div>"],o=$(n.join(""));o.insertBefore("#poluchatelData"),o.on("change","input",function(){$("#poluchatelData").toggle(!$(this).is(":checked")),$(this).is(":checked")?a=setInterval(function(){t.val(r.val()),e.val(i.val())},50):(t.val(""),e.val(""),clearInterval(a))})}function cartImportantFields(){if(!cartExpanded[site]){var t={"2steblya":["чтобы не мурыжить тебя в телеге, лучше","заполнить всю инфу сразу"],"2steblya_white":["чтобы нам не пришлось тревожить вас в телеграме, лучше","указать дополнительные данные"],gvozdisco:["чтобы нам не пришлось тревожить тебя в телеграме, лучше","указать дополнительные данные"],dorogobogato:["чтобы нам не пришлось тревожить тебя в телеграме, лучше","указать дополнительные данные"],staytrueflowers:["чтобы нам не пришлось тревожить вас в телеграме, лучше","указать дополнительные данные"]},e=$("#dostavka-interval");e.nextAll().not(":last").addClass("unimportantField");var a=['<div class="t-input-group t-input-group_cb" id="unimportantTrigger">','<div class="t-input-title t-descr t-descr_md">'+t[site][0]+"</div>",'<label class="t-checkbox__control t-text t-text_xs" style="padding:10px 0">','<input type="checkbox" class="t-checkbox js-tilda-rule">','<div class="t-checkbox__indicator"></div>',t[site][1],"</label>","</div>"],r=$(a.join(""));r.insertAfter(e),r.on("change","input",function(){cartIncompleteRemoveRequired(),r.nextAll().not(":last").removeClass("unimportantField"),$("#unimportantTrigger").remove()})}}function cartHtmlEntities(){var t=$(".t706 .unimportantField textarea, .t706 .unimportantField input");t.on("blur",function(){$(this).val($(this).val().replaceAll("@","&#64;"))})}function cartLovixlube(){$('#lovixlube[data-input-lid="1688065007506"] .t-input-block').append('<span class="logo"></span>')}function cartPayedDeliveryForOnlyDops(){if(!tovarsFromDB[888].length)return;var t=!1,e=$(".t706__product");if(!e.length)return;e.each(function(){if(t=tovarsFromDB[888].includes(getTovarInCartId($(this))),!t)return!1});const a=$("#dostavka-interval");t?(a.addClass("onlyDops"),deliveryPriceInterval(!0)):($("#adres-zazhopinsk input").prop("checked",!1),$("#adres-zazhopinsk").hide(),a.hasClass("onlyDops")&&(deliveryPriceInterval(!1),a.removeClass("onlyDops")))}function deliveryPriceInterval(t){const e=$("#dostavka-interval"),a=+$('.t706 [name="dostavka-price"]').val()||0,r=$('input[name="dostavka-interval"]:checked'),i=e.hasClass("onlyDops"),n=e.hasClass("onlyDopsUpgraded");e.find("label input").each(function(){const r=$(this),o=r.closest("label"),c=o.contents().filter(function(){return 3===this.nodeType&&""!==this.nodeValue.trim()}).last(),s=+r.attr("data-delivery-price")||0;if(t){if(n)return;r.attr("data-delivery-price",s+a),e.addClass("upgraded")}else{if(!i)return;r.attr("data-delivery-price",s-a),e.removeClass("upgraded")}const l=+r.attr("data-delivery-price")||0;let d=c.text().replace(/\(\+\d+ р\.\)/,"").trim();const u=l>0?`${d} (+${l} р.)`:d;c[0].nodeValue=u;const p=l>0?`${u} = ${l}`:u;r.attr("value",p)});const o=$("#dostavka-interval label input").not(r).first();o.trigger("click"),r.trigger("click")}function cartRequiredFields(){if(cartExpanded[site]){var t=['.t706 [name="dostavka-interval"]','.t706 [name="name-poluchatelya"]','.t706 [name="phone-poluchatelya"]','.t706 [name="adres-poluchatelya-street"]','.t706 [name="adres-poluchatelya-dom"]'];$(t.join(",")).attr("data-tilda-req",1),cartIncompleteRemoveRequired()}}function cartFormValidationTexts(){var t={"2steblya":["ну не-е-е-е...","скинь телефончик, а?","судью на мыло. но на какое?","а куда фотку букета выслать?","ты календарь... переверни...","а вдруг разбудим?"],"2steblya_white":["пожалуйста, укажи свое имя","пожалуйста, укажи свой номер телефона","пожалуйста, укажи свой ник в телеграм","пожалуйста, укажи дату доставки","пожалуйста, укажи интервал доставки"],gvozdisco:["пожалуйста, укажи свое имя","пожалуйста, укажи свой номер телефона","пожалуйста, укажи свой ник в телеграм","пожалуйста, укажи дату доставки","пожалуйста, укажи интервал доставки"],dorogobogato:["пожалуйста, укажи свое имя","пожалуйста, укажи свой номер телефона","пожалуйста, укажи свой ник в телеграм","пожалуйста, укажи дату доставки","пожалуйста, укажи интервал доставки"],staytrueflowers:["пожалуйста, укажите ваше имя","пожалуйста, укажите ваш номер телефона","пожалуйста, укажите ваш ник в телеграм","пожалуйста, укажите дату доставки","пожалуйста, укажите интервал доставки"]};formValidationTexts($(".t706__orderform"),t[site])}function cartAdresPoluchatelya(){function t(){$.each(a,function(t,e){r[e]=$('.t706 [name="adres-poluchatelya-'+e+'"]'),["city","street"].includes(e)||i.push("#adres-poluchatelya-"+e)})}function e(){$(i.join(",")).wrapAll('<div id="adresDataSmall" />').wrapAll("<div />"),$("#adres-poluchatelya-street,#adresDataSmall,#comment-courier").wrapAll("<div />").wrapAll('<div id="adresData" />')}var a=["city","street","dom","kvartira","korpus","stroenie","podezd","etazh","domofon"],r={},i=[];t(),e()}function cartHerZnaetPoluchatelya(){var t=$('.t706 [name="uznat-adres-u-poluchatelya"]');cartExpanded[site]?$("#uznat-adres-u-poluchatelya").remove():t.on("change",function(){$("#adresData").toggle(!$(this).is(":checked")),$('.t706 [name="comment-courier"]').val("").trigger("change"),$(".t706 .adresInput").each(function(){$(this).val("")})})}function cartProductOptionsInOneLine(){var t=$(".t706__product-title__option div");t.each(function(){var t=$(this).text().split(/\s*:\s*/);switch(t[0]){case"накинуть косарь":case"накинуть пятихатку":case"накинуть сотен":case"эвкалипт ннада":case"эвкалипт":case"добавить 1000":case"добавить 500":case"добавить 100":$(this).hide();break;case"выебри карточку":case"карточка":t[1]=t[1].replace("со своим","с вашим")}$(this).text(t[1])})}function cartPreventCloseOnOverlayClick(){var t=$(".t706__cartwin"),e=$('<div class="t706__cartwin-overlay"></div>');t.append(e),t.on("scroll",function(){e.css("top",$(this).scrollTop()+"px")})}function cartErrorsMessageOnClick(){var t,e,a=$(".t706__cartwin .t-submit"),r=a.text();a.on("click",function(){clearTimeout(t),clearTimeout(e),a.text("..."),t=setTimeout(function(){var t=$(".t706 .js-error-control-box"),i=[];if($.each(t,function(){var t=$(this).find(".t-input-title").text().trim();t&&i.push(t)}),i.length||1!=t.length||cartExpanded[site]){var n,o={"2steblya":"ЧТО-ТО НЕ ТОГО. ПЕРЕПРОВЕРЬ!","2steblya_white":"ФОРМА СОДЕРЖИТ ОШИБКИ",gvozdisco:"ФОРМА СОДЕРЖИТ ОШИБКИ",dorogobogato:"ФОРМА СОДЕРЖИТ ОШИБКИ",staytrueflowers:"ФОРМА СОДЕРЖИТ ОШИБКИ"};cartExpanded[site]?(n=3e3,a.text(o[site])):(n=6e3,a.html(o[site]+'<br><span class="errorsDescription">'+i.join(" / ")+"</span>")),e=setTimeout(function(){a.text(r)},n)}else cartFormIncomplete(),a.text(r)},400)})}function cartFormIncomplete(){cartIncompleteRemoveRequired();var t=$('[data-tooltip-hook="#popup:cartIncomplete"]');t.show().animate({opacity:1},"fast",function(){window.dispatchEvent(new Event("resize"))}),t.find(".t390__btn-wrapper a:nth-child(2)").on("click",function(t){t.preventDefault(),$(".t706__cartwin .t-submit").trigger("click")}),t.find(".t390__btn-wrapper a:nth-child(1)").on("click",function(e){e.preventDefault(),$("#unimportantTrigger input").trigger("click"),$("#unimportantTrigger").remove(),t.find(".t-popup__close").trigger("click")})}function cartIncompleteRemoveRequired(){var t={"2steblya":"1675967313188","2steblya_white":"1737898771773",gvozdisco:"1675967313188",dorogobogato:"",staytrueflowers:""};$('.t706 [data-input-lid="'+t[site]+'"] input').removeAttr("data-tilda-req")}function cartYaCounterId(){setTimeout(function(){var t;switch(site){case"2steblya":"undefined"!=typeof yaCounter89315640&&(t=yaCounter89315640);break;case"2steblya_white":"undefined"!=typeof yaCounter99731274&&(t=yaCounter99731274);break;case"gvozdisco":case"dorogobogato":"undefined"!=typeof yaCounter97065108&&(t=yaCounter97065108);break;case"staytrueflowers":"undefined"!=typeof yaCounter85909890&&(t=yaCounter85909890)}t&&$('.t706 [name="ya-client-id"]').val(t.getClientID())},3e3)}function cartIconUponHeader(){if(!(document.location.href.indexOf("tproduct")>-1)&&$(window).width()>980&&$(window).width()<1370){var t=$(".t706__carticon"),e={"2steblya":110,"2steblya_white":110,gvozdisco:140,dorogobogato:0,staytrueflowers:0};setInterval(function(){t.toggleClass("uponHeader",$(window).scrollTop()<=e[site])},50)}}function cartOnlyOneTovar(){if(tovarsFromDB.vitrina.length){var t=$(".t706__product");t.length&&t.each(function(){var t=getTovarInCartId($(this));tovarsFromDB.vitrina.includes(t)&&t!=nitakoi[site]&&$(this).children(".t706__product-plusminus").empty()})}}function cartPromocodeTovars(){if("all"==promocodeType[site])$("#promocode > div").show();else{var t=!1,e=$(".t706__product");e.each(function(){if(promocodeTovars[site].includes(getTovarInCartId($(this))))return t=!0,!1}),$("#promocode > div").toggle(t)}}function cartPromocode(){var t=$(".t-inputpromocode__wrapper");t.parents(".t-input-group").wrap('<div id="promocode"></div>'),$(".t-form__submit button").on("click",function(){setTimeout(function(){if(!t.find(".t-text").length&&t.siblings(".t-input-error").length&&"2steblya"==site){if(!t.find("input").val())return;t.siblings(".t-input-error").text("применяй или удаляй").show()}},500)}),$(".t706 .t-inputpromocode__btn").on("click",function(){setTimeout(function(){$(".t706 .t-inputpromocode__btn").length||"2steblya"==site&&t.find(".t-text").addClass("showed").html($(".t-inputpromocode__wrapper .t-text").html().replace("Ваша","твоя").replace("Промокод","промокод").replace(".",""))},500)})}function cartSetCookies(){function t(t,e){var a=[];$.each(e,function(t,e){a.push("#"+e+" input")}),$("body").on("change",a.join(),function(){if($(this).val()){var r={};$.each(e,function(t,e){r[e]=$(a[t]).val()}),Cookies.set(t,JSON.stringify(r),{expires:365})}})}t("zakazchik",["name-zakazchika","phone-zakazchika","messenger-zakazchika"]),t("adres-poluchatelya",["adres-poluchatelya-street","adres-poluchatelya-dom","adres-poluchatelya-kvartira","adres-poluchatelya-korpus","adres-poluchatelya-stroenie","adres-poluchatelya-podezd","adres-poluchatelya-etazh","adres-poluchatelya-domofon","comment-courier","adres-poluchatelya-city"])}function cartUseCookies(){function t(t,e,a,r){var i=Cookies.get(t);if(i){i=JSON.parse(i);for(var n=Object.values(i),o=0;o<a.length;o++)if(!n[a[o]])return;var c=$('<a class="cartUseCookieBtn">'+r+"</a>");$("#"+e[0]).append(c),c.on("click",function(t){t.preventDefault(),$(this).hide(),$.each(e,function(t,a){$("#"+e[t]+" input").val(n[t]).change()})})}}t("zakazchik",["name-zakazchika","phone-zakazchika","messenger-zakazchika"],[0,1],"вспомнить меня"),t("adres-poluchatelya",["adres-poluchatelya-street","adres-poluchatelya-dom","adres-poluchatelya-kvartira","adres-poluchatelya-korpus","adres-poluchatelya-stroenie","adres-poluchatelya-podezd","adres-poluchatelya-etazh","adres-poluchatelya-domofon","comment-courier","adres-poluchatelya-city"],[0,1],"как в прошлый раз")}function cartHideOtkudaUznal(){var t=Cookies.get("zakazchik");t&&$("#otkuda-uznal-o-nas").remove()}function cartO4ki(){function t(){a.paid&&a.free?a.free.find(".t706__product-amount").html(a.paid.find(".t706__product-amount").html()):a.free&&!a.paid&&a.free.find(".t706__product-amount").html("фри")}function e(t){var e=t?151584762682:839716392002;$('.uc-catalogO4ki .js-product[data-product-uid="'+e+'"] a[href="#order"]').eq(0).trigger("click")}if("gvozdisco"==site){var a={free:null,paid:null};$('.t-store__prod-popup__btn[href="#order"]').on("click",function(){setTimeout(function(){a.free||e(!1)},200)}),setInterval(function(){t();var r=$(".t706__product:not(.listenO4ki)");r.each(function(){$(this).addClass("listenO4ki"),"ДУРАЦКИЕ ОЧКИ"==$(this).find(".t706__product-title a").text()&&($(this).find(".t706__cartwin-prodamount-price").length?(a.paid=$(this),a.paid.hide()):(a.free=$(this),a.free.find("a").attr("href","/glasses"),a.free.on("click",".t706__product-minus img,.t706__product-plus img",function(t){t.stopPropagation();var r=$(t.target).parents(".t706__product-plusminus"),i=t.target.src.includes("plus.svg"),n=parseInt(r.children(".t706__product-quantity").text());2==n&&i?(e(!0),setTimeout(function(){cartProductOptionsInOneLine()},200)):(a.paid&&a.paid.find(".t706__product-"+(i?"plus":"minus")).trigger("click"),n<2&&(a.paid=null),n<=1&&(a.free=null))})),a.free&&a.free.on("click",".t706__product-del",function(){a.free=null,setTimeout(function(){a.paid&&a.paid.find(".t706__product-del").trigger("click"),a.paid=null},100)}))}),(2==r.length&&a.paid&&a.free||1==r.length&&a.free)&&a.free.find(".t706__product-del").trigger("click");let i=window.tcart.products.reduce((t,e)=>("ДУРАЦКИЕ ОЧКИ"===e.name&&e.price||(t+=e.quantity),t),0);$(".t706__carticon-counter").text(i)},100)}}function cartSuccess(){var t=$(".t706 .js-successbox"),e={"2steblya":'заказ оформлен успешно, но похоже Юкасса тупит и не хочет, штоб твои денюжки потекли к нам рекой<br><br>напиши нам в <a href="https://t.me/dva_steblya">телегу</a>, расскажи, что вот такая оказия случилась, и мы скинем тебе новую нормальную ссыклу на оплат очку',"2steblya_white":'твой заказ оформлен, но мы не смогли перенаправить тебя на оплату заказа в Юкассе.<br><br>Напиши нам в <a href="https://t.me/flowerswithbenefits">телеграм</a>, и мы вышлем тебе новую рабочую ссылку на оплату',gvozdisco:'твой заказ оформлен, но мы не смогли перенаправить тебя на оплату заказа в Юкассе.<br><br>Напиши нам в <a href="https://t.me/dva_steblya">телеграм</a>, и мы вышлем тебе новую рабочую ссылку на оплату',dorogobogato:'твой заказ оформлен, но мы не смогли перенаправить тебя на оплату заказа в Юкассе.<br><br>Напиши нам в <a href="https://t.me/dva_steblya">телеграм</a>, и мы вышлем тебе новую рабочую ссылку на оплату',staytrueflowers:'Ваш заказ оформлен, но мы не смогли перенаправить вас на оплату заказа в Юкассе.<br><br>Напишите нам в <a href="https://t.me/staytrueflowers">телеграм</a>, и мы вышлем вам новую рабочую ссылку на оплату.'};t.addClass("hidden").attr("data-success-message",e[site]),$(".t706 form").on("tildaform:aftersuccess",function(){setTimeout(function(){t.removeClass("hidden")},3e3)})}function getTovarInCartId(t){return parseInt(t.find(".t706__product-title a").attr("href").match(/\d{12}/))}function getTovarInCartPrice(t){return parseInt(t.find(".t706__cartwin-prodamount-price").text().replace(/[^\d]/,""))}function getTovarInCartTitle(t){return t.find(".t706__product-title a").text()}var promocodeApplied=[];